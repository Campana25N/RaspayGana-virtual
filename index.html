<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Raspa y Gana Virtual</title>
<style>
  body {
    margin: 0;
    background: #222;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }

  #scratchContainer {
    position: relative;
    width: 100%;
    max-width: 800px;
    aspect-ratio: 9 / 5; /* proporci√≥n de tu tarjeta */
    overflow: hidden;
    border-radius: 10px;
  }

  #premio {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 10px;
    object-fit: cover;
  }

  /* üéØ Ajuste de posici√≥n y tama√±o del √°rea de raspado */
  #raspado {
    position: absolute;
    left: 70%;
    top: 50%;
    width: 53.01%;
    height: 78.26%;
    transform: translate(-50%, -50%);
    border-radius: 20px;
    touch-action: none;
  }
</style>
</head>
<body>

<div id="scratchContainer">
  <img id="premio" src="" alt="Premio">
  <canvas id="raspado"></canvas>
</div>

<script>
const canvas = document.getElementById("raspado");
const ctx = canvas.getContext("2d");
const premioImg = document.getElementById("premio");

// üéÅ Lista de 10 im√°genes de premio
const premios = [
  "premio1.png",
  "premio2.png",
  "premio3.png",
  "premio4.png",
  "premio5.png",
  "premio6.png",
  "premio7.png",
  "premio8.png",
  "premio9.png",
  "premio10.png"
];

// üîÄ Selecci√≥n aleatoria
const randomIndex = Math.floor(Math.random() * premios.length);
premioImg.src = premios[randomIndex];

// üß© Ajustar el tama√±o del canvas
function resizeCanvas() {
  canvas.width = canvas.offsetWidth;
  canvas.height = canvas.offsetHeight;
  ctx.globalCompositeOperation = "source-over";
  ctx.fillStyle = "#999"; // color gris del raspado
  ctx.fillRect(0, 0, canvas.width, canvas.height);
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

// üñ±Ô∏è Funcionalidad de raspado
let isDrawing = false;

function startScratch(e) {
  isDrawing = true;
  scratch(e);
}

function endScratch() {
  isDrawing = false;
  ctx.beginPath();
}

function scratch(e) {
  if (!isDrawing) return;
  const rect = canvas.getBoundingClientRect();
  const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
  const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;

  ctx.globalCompositeOperation = "destination-out";
  ctx.beginPath();
  ctx.arc(x, y, 40, 0, Math.PI * 2);
  ctx.fill();
}

// üì± Eventos compatibles con mouse y t√°ctil
canvas.addEventListener("mousedown", startScratch);
canvas.addEventListener("mouseup", endScratch);
canvas.addEventListener("mousemove", scratch);
canvas.addEventListener("touchstart", startScratch);
canvas.addEventListener("touchend", endScratch);
canvas.addEventListener("touchmove", scratch);
</script>

</body>
</html>
