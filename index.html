<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Raspa y Gana Virtual</title>

<style>
  body {
    margin: 0;
    background: #222;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }

  #scratchContainer {
    position: relative;
    width: 100%;
    max-width: 800px;
    aspect-ratio: 9 / 5;
    overflow: hidden;
    border-radius: 10px;
  }

  #premio {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 10px;
    object-fit: cover;
  }

  #raspado {
    position: absolute;
    left: 70%;
    top: 50%;
    width: 53.01%;
    height: 78.26%;
    transform: translate(-50%, -50%);
    border-radius: 20px;
    touch-action: none;
  }
</style>
</head>

<body>

<div id="scratchContainer">
  <img id="premio" src="premio1.png" alt="Premio">
  <canvas id="raspado"></canvas>
</div>

<script>
const canvas = document.getElementById("raspado");
const ctx = canvas.getContext("2d");

// üé® Canvas auxiliar para el degradado
const gradCanvas = document.createElement("canvas");
const gradCtx = gradCanvas.getContext("2d");

// üß© Ajustar tama√±o responsivo
function resizeCanvas() {
  canvas.width = canvas.offsetWidth;
  canvas.height = canvas.offsetHeight;

  gradCanvas.width = canvas.width;
  gradCanvas.height = canvas.height;
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

// ‚úèÔ∏è Raspado
let isDrawing = false;

function startScratch(e) {
  isDrawing = true;
  scratch(e);
}

function endScratch() {
  isDrawing = false;
  ctx.beginPath();
}

function scratch(e) {
  if (!isDrawing) return;

  const rect = canvas.getBoundingClientRect();
  const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
  const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;

  ctx.globalCompositeOperation = "destination-out";
  ctx.beginPath();
  ctx.arc(x, y, canvas.width * 0.05, 0, Math.PI * 2);
  ctx.fill();
}

// Eventos
canvas.addEventListener("mousedown", startScratch);
canvas.addEventListener("mouseup", endScratch);
canvas.addEventListener("mousemove", scratch);
canvas.addEventListener("touchstart", startScratch);
canvas.addEventListener("touchend", endScratch);
canvas.addEventListener("touchmove", scratch);

// üéÜ Degradado animado
let shift = 0;

function drawGradient() {
  const w = gradCanvas.width;
  const h = gradCanvas.height;

  const grad = gradCtx.createLinearGradient(
    0, 0,
    w * (1 + Math.sin(shift) * 0.5),
    h
  );

  grad.addColorStop(0, "#d0d0d0");
  grad.addColorStop(0.5, "#ffffff");
  grad.addColorStop(1, "#9a9a9a");

  gradCtx.fillStyle = grad;
  gradCtx.fillRect(0, 0, w, h);
}

function animate() {
  shift += 0.02;

  drawGradient();

  // Copiar el degradado sin borrar el raspado
  ctx.globalCompositeOperation = "source-over";
  ctx.drawImage(gradCanvas, 0, 0);

  requestAnimationFrame(animate);
}

animate();
</script>

</body>
</html>




